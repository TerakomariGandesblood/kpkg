{
  "install": [
    "sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test",
    "sudo apt update",
    "sudo apt install -y gcc-11 g++-11",
    "sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 400",
    "sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-11 400",
    "curl -L https://github.com/llvm/llvm-project/releases/download/llvmorg-12.0.0/clang+llvm-12.0.0-x86_64-linux-gnu-ubuntu-20.04.tar.xz -o clang+llvm-12.0.0-x86_64-linux-gnu-ubuntu-20.04.tar.xz",
    "tar -xf clang+llvm-12.0.0-x86_64-linux-gnu-ubuntu-20.04.tar.xz",
    "sudo cp -r clang+llvm-12.0.0-x86_64-linux-gnu-ubuntu-20.04/* /usr/local",
    "sudo update-alternatives --install /usr/bin/clang clang /usr/local/bin/clang 400",
    "sudo update-alternatives --install /usr/bin/clang++ clang++ /usr/local/bin/clang++ 400",
    "sudo update-alternatives --install /usr/bin/llvm-ar llvm-ar /usr/local/bin/llvm-ar 400",
    "sudo update-alternatives --install /usr/bin/llvm-nm llvm-nm /usr/local/bin/llvm-nm 400",
    "sudo update-alternatives --install /usr/bin/llvm-ranlib llvm-ranlib /usr/local/bin/llvm-ranlib 400",
    "sudo update-alternatives --install /usr/bin/llvm-profdata llvm-profdata /usr/local/bin/llvm-profdata 400",
    "sudo update-alternatives --install /usr/bin/llvm-cov llvm-cov /usr/local/bin/llvm-cov 400",
    "sudo update-alternatives --install /usr/bin/clang-tidy clang-tidy /usr/local/bin/clang-tidy 400",
    "sudo update-alternatives --install /usr/bin/llvm-symbolizer llvm-symbolizer /usr/local/bin/llvm-symbolizer 400",
    "sudo apt install -y make cmake ninja-build re2c autoconf automake libtool m4 tcl valgrind"
  ],
  "port": [
    {
      "name": "CMake",
      "releases_url": "",
      "tags_url": "https://api.github.com/repos/Kitware/CMake/tags",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "./bootstrap --parallel=\"$(nproc)\" -- -DCMAKE_BUILD_TYPE:STRING=Release",
        "make -j\"$(nproc)\"",
        "sudo make install"
      ]
    },
    {
      "name": "ninja",
      "releases_url": "https://api.github.com/repos/ninja-build/ninja/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "doxygen",
      "releases_url": "",
      "tags_url": "https://api.github.com/repos/doxygen/doxygen/tags",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "lcov",
      "releases_url": "https://api.github.com/repos/linux-test-project/lcov/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": ["sudo make install"]
    },
    {
      "name": "libc++",
      "releases_url": "https://api.github.com/repos/llvm/llvm-project/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "cmake -S llvm -B build -DCMAKE_BUILD_TYPE=Release -DLIBCXX_ENABLE_SHARED=OFF -DLIBCXX_INCLUDE_TESTS=OFF -DLIBCXX_INCLUDE_BENCHMARKS=OFF -DLIBCXXABI_ENABLE_SHARED=OFF -DLLVM_ENABLE_PROJECTS=\"libcxx;libcxxabi\"",
        "cmake --build build --config Release -j\"$(nproc)\" --target cxx cxxabi",
        "sudo cmake --build build --config Release --target install-cxx install-cxxabi",
        "cmake -S llvm -B build -DCMAKE_BUILD_TYPE=Release -DLIBCXX_ENABLE_SHARED=OFF -DLIBCXX_INCLUDE_TESTS=OFF -DLIBCXX_INCLUDE_BENCHMARKS=OFF -DLIBCXXABI_ENABLE_SHARED=OFF -DLLVM_USE_SANITIZER=MemoryWithOrigins -DLLVM_ENABLE_PROJECTS=\"libcxx;libcxxabi\"",
        "cmake -S llvm -B build -DCMAKE_BUILD_TYPE=Release -DLIBCXX_ENABLE_SHARED=OFF -DLIBCXX_INCLUDE_TESTS=OFF -DLIBCXX_INCLUDE_BENCHMARKS=OFF -DLIBCXXABI_ENABLE_SHARED=OFF -DLLVM_USE_SANITIZER=Thread -DLLVM_ENABLE_PROJECTS=\"libcxx;libcxxabi\""
      ]
    },
    {
      "name": "zlib",
      "releases_url": "",
      "tags_url": "https://api.github.com/repos/madler/zlib/tags",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "./configure --static",
        "make -j\"$(nproc)\"",
        "sudo make install"
      ]
    },
    {
      "name": "libarchive",
      "releases_url": "https://api.github.com/repos/libarchive/libarchive/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": ["zlib"],
      "cwd": "",
      "cmd": [
        "bash build/autogen.sh",
        "./configure --disable-shared --disable-bsdtar --disable-bsdcat --disable-bsdcpio --without-bz2lib --without-libb2 --without-lz4 --without-zstd --without-lzma --without-cng --without-openssl --without-xml2 --without-expat",
        "make -j\"$(nproc)\"",
        "sudo make install"
      ]
    },
    {
      "name": "zstd",
      "releases_url": "https://api.github.com/repos/facebook/zstd/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "build/cmake",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DZSTD_BUILD_PROGRAMS=OFF -DZSTD_BUILD_TESTS=OFF -DZSTD_BUILD_SHARED=OFF",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "openssl",
      "releases_url": "",
      "tags_url": "",
      "tag_name": "OpenSSL_1_1_1k",
      "download_url": "https://api.github.com/repos/openssl/openssl/tarball/refs/tags/OpenSSL_1_1_1k",
      "dependency": [],
      "cwd": "",
      // https://github.com/openssl/openssl/blob/master/INSTALL.md
      "cmd": [
        "./Configure linux-x86_64 no-tests no-shared no-asm",
        "make -j\"$(nproc)\"",
        "sudo make install_sw"
      ]
    },
    {
      "name": "curl",
      "releases_url": "https://api.github.com/repos/curl/curl/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": ["zlib", "openssl"],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_CURL_EXE=OFF -DBUILD_SHARED_LIBS=OFF -DHTTP_ONLY=ON -DENABLE_MANUAL=OFF -DBUILD_TESTING=OFF",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "jemalloc",
      "releases_url": "https://api.github.com/repos/jemalloc/jemalloc/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      // https://github.com/jemalloc/jemalloc/blob/dev/INSTALL.md
      "cmd": [
        "autoconf",
        "./configure --disable-shared --enable-autogen",
        "make -j\"$(nproc)\"",
        "sudo make install"
      ]
    },
    {
      "name": "rocksdb",
      "releases_url": "",
      "tags_url": "https://api.github.com/repos/facebook/rocksdb/tags",
      "tag_name": "",
      "download_url": "",
      "dependency": ["jemalloc", "zstd"],
      "cwd": "",
      // https://github.com/facebook/rocksdb/blob/master/INSTALL.md
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DWITH_JEMALLOC=ON -DWITH_ZSTD=ON -DWITH_GFLAGS=OFF -DUSE_RTTI=ON -DROCKSDB_BUILD_SHARED=OFF -DWITH_TESTS=OFF -DWITH_BENCHMARK_TOOLS=OFF -DWITH_CORE_TOOLS=OFF -DWITH_TOOLS=OFF -DWITH_ALL_TESTS=OFF -DCMAKE_INSTALL_PREFIX=/usr/local",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "fmt",
      "releases_url": "https://api.github.com/repos/fmtlib/fmt/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DFMT_DOC=OFF -DFMT_TEST=OFF",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "spdlog",
      "releases_url": "https://api.github.com/repos/gabime/spdlog/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": ["fmt"],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DSPDLOG_BUILD_EXAMPLE=OFF -DSPDLOG_FMT_EXTERNAL=ON",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "benchmark",
      "releases_url": "https://api.github.com/repos/google/benchmark/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DBENCHMARK_ENABLE_TESTING=OFF",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "sqlite",
      "releases_url": "",
      "tags_url": "https://api.github.com/repos/sqlite/sqlite/tags",
      "tag_name": "",
      "download_url": "",
      "dependency": ["zlib"],
      "cwd": "",
      "cmd": [
        "./configure --disable-shared --disable-tcl --disable-readline",
        "make -j\"$(nproc)\"",
        "sudo make install"
      ]
    },
    {
      "name": "protobuf",
      "releases_url": "https://api.github.com/repos/protocolbuffers/protobuf/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": ["zlib"],
      "cwd": "",
      "cmd": [
        "./autogen.sh",
        "./configure --disable-shared",
        "make -j\"$(nproc)\"",
        "sudo make install"
      ]
    },
    {
      "name": "magic_enum",
      "releases_url": "https://api.github.com/repos/Neargye/magic_enum/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DMAGIC_ENUM_OPT_BUILD_EXAMPLES=OFF -DMAGIC_ENUM_OPT_BUILD_TESTS=OFF",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "boost",
      "releases_url": "",
      "tags_url": "",
      "tag_name": "boost-1.76.0",
      "download_url": "https://boostorg.jfrog.io/artifactory/main/release/1.76.0/source/boost_1_76_0.tar.gz",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "./bootstrap.sh",
        "sudo ./b2 --with-json --with-program_options cflags=\"-fPIC\" cxxflags=\"-fPIC\" toolset=gcc-11 link=static install",
        "sudo ./b2 --with-json --with-program_options cflags=\"-fPIC -fsanitize=memory -fsanitize-memory-track-origins -fsanitize-memory-use-after-dtor -fno-omit-frame-pointer -fno-optimize-sibling-calls\" cxxflags=\"-fPIC -fsanitize=memory -fsanitize-memory-track-origins -fsanitize-memory-use-after-dtor -fno-omit-frame-pointer -fno-optimize-sibling-calls -stdlib=libc++ -Wno-unused-command-line-argument -Wl,/usr/local/lib/libc++abi.a -Wl,/usr/local/lib/libc++.a\" toolset=clang-12 link=static install",
        "sudo ./b2 --with-json --with-program_options cflags=\"-fPIC -fsanitize=thread\" cxxflags=\"-fPIC -fsanitize=thread -stdlib=libc++ -Wno-unused-command-line-argument -Wl,/usr/local/lib/libc++abi.a -Wl,/usr/local/lib/libc++.a\" toolset=clang-12 link=static install"
      ]
    },
    {
      "name": "oneTBB",
      "releases_url": "https://api.github.com/repos/oneapi-src/oneTBB/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DTBB_TEST=OFF",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "icu",
      "releases_url": "https://api.github.com/repos/unicode-org/icu/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "icu4c/source",
      // https://unicode-org.github.io/icu/userguide/icu4c/build.html#how-to-build-and-install-on-unix
      "cmd": [
        "./runConfigureICU Linux --disable-tests --disable-samples",
        "make -j\"$(nproc)\"",
        "sudo make install"
      ]
    },
    {
      "name": "googletest",
      "releases_url": "https://api.github.com/repos/google/googletest/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DBUILD_GMOCK=OFF",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "gflags",
      "releases_url": "https://api.github.com/repos/gflags/gflags/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "export CFLAGS=\"$CFLAGS -DSTRIP_FLAG_HELP=1\" && export CXXFLAGS=\"$CXXFLAGS -DSTRIP_FLAG_HELP=1\" && cmake -S . -B build -DCMAKE_BUILD_TYPE=Release",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    },
    {
      "name": "Catch2",
      "releases_url": "https://api.github.com/repos/catchorg/Catch2/releases/latest",
      "tags_url": "",
      "tag_name": "",
      "download_url": "",
      "dependency": [],
      "cwd": "",
      "cmd": [
        "export CFLAGS=\"$CFLAGS -DCATCH_CONFIG_ENABLE_BENCHMARKING\" && export CXXFLAGS=\"$CXXFLAGS -DCATCH_CONFIG_ENABLE_BENCHMARKING\" && cmake -S . -B build -DCMAKE_BUILD_TYPE=Release -DCATCH_BUILD_TESTING=OFF -DCATCH_BUILD_STATIC_LIBRARY=ON -DCATCH_INSTALL_DOCS=OFF",
        "cmake --build build --config Release -j\"$(nproc)\"",
        "sudo cmake --build build --config Release --target install"
      ]
    }
  ]
}
